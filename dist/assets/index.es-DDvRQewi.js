import{e as Ke,k as Cn,y as ye,z as Ur,d as Oe,g as Hr,D as fn}from"./index-xEq5DF-i.js";import{i as zr,f as Gr,h as Fr,j as Wr,k as Jr,l as kr,m as Xr,n as Yr,o as Vr,p as Zr,c as ke,t as qr,w as Mn,r as Nn}from"./json-B2Dwjc5S.js";function Dn(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(n):new Uint8Array(n)}function Qr(n,e){e||(e=n.reduce((l,O)=>l+O.length,0));const r=Dn(e);let g=0;for(const l of n)r.set(l,g),g+=l.length;return r}const cn={...zr,...Gr,...Fr,...Wr,...Jr,...kr,...Xr,...Yr,...Vr,...Zr};function jn(n,e,r,g){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:r},decoder:{decode:g}}}const un=jn("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),Ge=jn("ascii","a",n=>{let e="a";for(let r=0;r<n.length;r++)e+=String.fromCharCode(n[r]);return e},n=>{n=n.substring(1);const e=Dn(n.length);for(let r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return e}),Bn={utf8:un,"utf-8":un,hex:cn.base16,latin1:Ge,ascii:Ge,binary:Ge,...cn};function he(n,e="utf8"){const r=Bn[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n,"utf8"):r.decoder.decode(`${r.prefix}${n}`)}function Ue(n,e="utf8"){const r=Bn[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString("utf8"):r.encoder.encode(n).substring(1)}const ts=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,es=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,ns=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function rs(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ss(n);return}return e}function ss(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Re(n,e={}){if(typeof n!="string")return n;const r=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return r.slice(1,-1);if(r.length<=9){const g=r.toLowerCase();if(g==="true")return!0;if(g==="false")return!1;if(g==="undefined")return;if(g==="null")return null;if(g==="nan")return Number.NaN;if(g==="infinity")return Number.POSITIVE_INFINITY;if(g==="-infinity")return Number.NEGATIVE_INFINITY}if(!ns.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(ts.test(n)||es.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,rs)}return JSON.parse(n)}catch(g){if(e.strict)throw g;return n}}function is(n){return!n||typeof n.then!="function"?Promise.resolve(n):n}function It(n,...e){try{return is(n(...e))}catch(r){return Promise.reject(r)}}function os(n){const e=typeof n;return n===null||e!=="object"&&e!=="function"}function as(n){const e=Object.getPrototypeOf(n);return!e||e.isPrototypeOf(Object)}function Ce(n){if(os(n))return String(n);if(as(n)||Array.isArray(n))return JSON.stringify(n);if(typeof n.toJSON=="function")return Ce(n.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function $n(){if(typeof Buffer===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const Je="base64:";function fs(n){if(typeof n=="string")return n;$n();const e=Buffer.from(n).toString("base64");return Je+e}function cs(n){return typeof n!="string"||!n.startsWith(Je)?n:($n(),Buffer.from(n.slice(Je.length),"base64"))}function Bt(n){return n?n.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function us(...n){return Bt(n.join(":"))}function Pe(n){return n=Bt(n),n?n+":":""}const ls="memory",hs=()=>{const n=new Map;return{name:ls,options:{},hasItem(e){return n.has(e)},getItem(e){return n.get(e)??null},getItemRaw(e){return n.get(e)??null},setItem(e,r){n.set(e,r)},setItemRaw(e,r){n.set(e,r)},removeItem(e){n.delete(e)},getKeys(){return Array.from(n.keys())},clear(){n.clear()},dispose(){n.clear()}}};function ds(n={}){const e={mounts:{"":n.driver||hs()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=a=>{for(const h of e.mountpoints)if(a.startsWith(h))return{base:h,relativeKey:a.slice(h.length),driver:e.mounts[h]};return{base:"",relativeKey:a,driver:e.mounts[""]}},g=(a,h)=>e.mountpoints.filter(y=>y.startsWith(a)||h&&a.startsWith(y)).map(y=>({relativeBase:a.length>y.length?a.slice(y.length):void 0,mountpoint:y,driver:e.mounts[y]})),l=(a,h)=>{if(e.watching){h=Bt(h);for(const y of e.watchListeners)y(a,h)}},O=async()=>{if(!e.watching){e.watching=!0;for(const a in e.mounts)e.unwatch[a]=await ln(e.mounts[a],l,a)}},F=async()=>{if(e.watching){for(const a in e.unwatch)await e.unwatch[a]();e.unwatch={},e.watching=!1}},A=(a,h,y)=>{const v=new Map,T=m=>{let j=v.get(m.base);return j||(j={driver:m.driver,base:m.base,items:[]},v.set(m.base,j)),j};for(const m of a){const j=typeof m=="string",tt=Bt(j?m:m.key),St=j?void 0:m.value,B=j||!m.options?h:{...h,...m.options},Dt=r(tt);T(Dt).items.push({key:tt,value:St,relativeKey:Dt.relativeKey,options:B})}return Promise.all([...v.values()].map(m=>y(m))).then(m=>m.flat())},S={hasItem(a,h={}){a=Bt(a);const{relativeKey:y,driver:v}=r(a);return It(v.hasItem,y,h)},getItem(a,h={}){a=Bt(a);const{relativeKey:y,driver:v}=r(a);return It(v.getItem,y,h).then(T=>Re(T))},getItems(a,h){return A(a,h,y=>y.driver.getItems?It(y.driver.getItems,y.items.map(v=>({key:v.relativeKey,options:v.options})),h).then(v=>v.map(T=>({key:us(y.base,T.key),value:Re(T.value)}))):Promise.all(y.items.map(v=>It(y.driver.getItem,v.relativeKey,v.options).then(T=>({key:v.key,value:Re(T)})))))},getItemRaw(a,h={}){a=Bt(a);const{relativeKey:y,driver:v}=r(a);return v.getItemRaw?It(v.getItemRaw,y,h):It(v.getItem,y,h).then(T=>cs(T))},async setItem(a,h,y={}){if(h===void 0)return S.removeItem(a);a=Bt(a);const{relativeKey:v,driver:T}=r(a);T.setItem&&(await It(T.setItem,v,Ce(h),y),T.watch||l("update",a))},async setItems(a,h){await A(a,h,async y=>{if(y.driver.setItems)return It(y.driver.setItems,y.items.map(v=>({key:v.relativeKey,value:Ce(v.value),options:v.options})),h);y.driver.setItem&&await Promise.all(y.items.map(v=>It(y.driver.setItem,v.relativeKey,Ce(v.value),v.options)))})},async setItemRaw(a,h,y={}){if(h===void 0)return S.removeItem(a,y);a=Bt(a);const{relativeKey:v,driver:T}=r(a);if(T.setItemRaw)await It(T.setItemRaw,v,h,y);else if(T.setItem)await It(T.setItem,v,fs(h),y);else return;T.watch||l("update",a)},async removeItem(a,h={}){typeof h=="boolean"&&(h={removeMeta:h}),a=Bt(a);const{relativeKey:y,driver:v}=r(a);v.removeItem&&(await It(v.removeItem,y,h),(h.removeMeta||h.removeMata)&&await It(v.removeItem,y+"$",h),v.watch||l("remove",a))},async getMeta(a,h={}){typeof h=="boolean"&&(h={nativeOnly:h}),a=Bt(a);const{relativeKey:y,driver:v}=r(a),T=Object.create(null);if(v.getMeta&&Object.assign(T,await It(v.getMeta,y,h)),!h.nativeOnly){const m=await It(v.getItem,y+"$",h).then(j=>Re(j));m&&typeof m=="object"&&(typeof m.atime=="string"&&(m.atime=new Date(m.atime)),typeof m.mtime=="string"&&(m.mtime=new Date(m.mtime)),Object.assign(T,m))}return T},setMeta(a,h,y={}){return this.setItem(a+"$",h,y)},removeMeta(a,h={}){return this.removeItem(a+"$",h)},async getKeys(a,h={}){a=Pe(a);const y=g(a,!0);let v=[];const T=[];for(const m of y){const tt=(await It(m.driver.getKeys,m.relativeBase,h)).map(St=>m.mountpoint+Bt(St)).filter(St=>!v.some(B=>St.startsWith(B)));T.push(...tt),v=[m.mountpoint,...v.filter(St=>!St.startsWith(m.mountpoint))]}return a?T.filter(m=>m.startsWith(a)&&!m.endsWith("$")):T.filter(m=>!m.endsWith("$"))},async clear(a,h={}){a=Pe(a),await Promise.all(g(a,!1).map(async y=>{if(y.driver.clear)return It(y.driver.clear,y.relativeBase,h);if(y.driver.removeItem){const v=await y.driver.getKeys(y.relativeBase||"",h);return Promise.all(v.map(T=>y.driver.removeItem(T,h)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(a=>hn(a)))},async watch(a){return await O(),e.watchListeners.push(a),async()=>{e.watchListeners=e.watchListeners.filter(h=>h!==a),e.watchListeners.length===0&&await F()}},async unwatch(){e.watchListeners=[],await F()},mount(a,h){if(a=Pe(a),a&&e.mounts[a])throw new Error(`already mounted at ${a}`);return a&&(e.mountpoints.push(a),e.mountpoints.sort((y,v)=>v.length-y.length)),e.mounts[a]=h,e.watching&&Promise.resolve(ln(h,l,a)).then(y=>{e.unwatch[a]=y}).catch(console.error),S},async unmount(a,h=!0){a=Pe(a),!(!a||!e.mounts[a])&&(e.watching&&a in e.unwatch&&(e.unwatch[a](),delete e.unwatch[a]),h&&await hn(e.mounts[a]),e.mountpoints=e.mountpoints.filter(y=>y!==a),delete e.mounts[a])},getMount(a=""){a=Bt(a)+":";const h=r(a);return{driver:h.driver,base:h.base}},getMounts(a="",h={}){return a=Bt(a),g(a,h.parents).map(v=>({driver:v.driver,base:v.mountpoint}))}};return S}function ln(n,e,r){return n.watch?n.watch((g,l)=>e(g,r+l)):()=>{}}async function hn(n){typeof n.dispose=="function"&&await It(n.dispose)}function ce(n){return new Promise((e,r)=>{n.oncomplete=n.onsuccess=()=>e(n.result),n.onabort=n.onerror=()=>r(n.error)})}function Kn(n,e){const r=indexedDB.open(n);r.onupgradeneeded=()=>r.result.createObjectStore(e);const g=ce(r);return(l,O)=>g.then(F=>O(F.transaction(e,l).objectStore(e)))}let Fe;function _e(){return Fe||(Fe=Kn("keyval-store","keyval")),Fe}function dn(n,e=_e()){return e("readonly",r=>ce(r.get(n)))}function gs(n,e,r=_e()){return r("readwrite",g=>(g.put(e,n),ce(g.transaction)))}function bs(n,e=_e()){return e("readwrite",r=>(r.delete(n),ce(r.transaction)))}function ps(n=_e()){return n("readwrite",e=>(e.clear(),ce(e.transaction)))}function ys(n,e){return n.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ce(n.transaction)}function xs(n=_e()){return n("readonly",e=>{if(e.getAllKeys)return ce(e.getAllKeys());const r=[];return ys(e,g=>r.push(g.key)).then(()=>r)})}const _s=n=>JSON.stringify(n,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),ms=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=n.replace(e,'$1"$2n"$3');return JSON.parse(r,(g,l)=>typeof l=="string"&&l.match(/^\d+n$/)?BigInt(l.substring(0,l.length-1)):l)};function me(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return ms(n)}catch{return n}}function se(n){return typeof n=="string"?n:_s(n)||""}const ws="idb-keyval";var vs=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",r=l=>e+l;let g;return n.dbName&&n.storeName&&(g=Kn(n.dbName,n.storeName)),{name:ws,options:n,async hasItem(l){return!(typeof await dn(r(l),g)>"u")},async getItem(l){return await dn(r(l),g)??null},setItem(l,O){return gs(r(l),O,g)},removeItem(l){return bs(r(l),g)},getKeys(){return xs(g)},clear(){return ps(g)}}};const Es="WALLET_CONNECT_V2_INDEXED_DB",Is="keyvaluestorage";let Ss=class{constructor(){this.indexedDb=ds({driver:vs({dbName:Es,storeName:Is})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,se(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var We=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Me={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},n.prototype.setItem=function(r,g){this[r]=String(g)},n.prototype.removeItem=function(r){delete this[r]},n.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(g){r[g]=void 0,delete r[g]})},n.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof We<"u"&&We.localStorage?Me.exports=We.localStorage:typeof window<"u"&&window.localStorage?Me.exports=window.localStorage:Me.exports=new e})();function Ls(n){var e;return[n[0],me((e=n[1])!=null?e:"")]}class Ts{constructor(){this.localStorage=Me.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Ls)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return me(r)}async setItem(e,r){this.localStorage.setItem(e,se(r))}async removeItem(e){this.localStorage.removeItem(e)}}const As="wc_storage_version",gn=1,Os=async(n,e,r)=>{const g=As,l=await e.getItem(g);if(l&&l>=gn){r(e);return}const O=await n.getKeys();if(!O.length){r(e);return}const F=[];for(;O.length;){const A=O.shift();if(!A)continue;const S=A.toLowerCase();if(S.includes("wc@")||S.includes("walletconnect")||S.includes("wc_")||S.includes("wallet_connect")){const a=await n.getItem(A);await e.setItem(A,a),F.push(A)}}await e.setItem(g,gn),r(e),Rs(n,F)},Rs=async(n,e)=>{e.length&&e.forEach(async r=>{await n.removeItem(r)})};let Hi=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new Ts;this.storage=e;try{const r=new Ss;Os(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};class Ps{}let Cs=class extends Ps{constructor(e){super()}};const bn=ke.FIVE_SECONDS,Ms={pulse:"heartbeat_pulse"};let Fi=class Un extends Cs{constructor(e){super(e),this.events=new Ke.EventEmitter,this.interval=bn,this.interval=(e==null?void 0:e.interval)||bn}static async init(e){const r=new Un(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ke.toMiliseconds(this.interval))}pulse(){this.events.emit(Ms.pulse)}};const Ns={level:"info"},we="custom_context",Xe=1e3*1024;let Ds=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},pn=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new Ds(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},Hn=class{constructor(e,r=Xe){this.level=e??"error",this.levelValue=ye.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new pn(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ye.levels.values.error?console.error(e):r===ye.levels.values.warn?console.warn(e):r===ye.levels.values.debug?console.debug(e):r===ye.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(se({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new pn(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(se({extraMetadata:e})),new Blob(r,{type:"application/json"})}};class js{constructor(e,r=Xe){this.baseChunkLogger=new Hn(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),g=document.createElement("a");g.href=r,g.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(r)}}class Bs{constructor(e,r=Xe){this.baseChunkLogger=new Hn(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var $s=Object.defineProperty,Ks=Object.defineProperties,Us=Object.getOwnPropertyDescriptors,yn=Object.getOwnPropertySymbols,Hs=Object.prototype.hasOwnProperty,zs=Object.prototype.propertyIsEnumerable,xn=(n,e,r)=>e in n?$s(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,Ne=(n,e)=>{for(var r in e||(e={}))Hs.call(e,r)&&xn(n,r,e[r]);if(yn)for(var r of yn(e))zs.call(e,r)&&xn(n,r,e[r]);return n},De=(n,e)=>Ks(n,Us(e));function Xi(n){return De(Ne({},n),{level:(n==null?void 0:n.level)||Ns.level})}function Gs(n,e=we){return n[e]||""}function Fs(n,e,r=we){return n[r]=e,n}function Ws(n,e=we){let r="";return typeof n.bindings>"u"?r=Gs(n,e):r=n.bindings().context||"",r}function Js(n,e,r=we){const g=Ws(n,r);return g.trim()?`${g}/${e}`:e}function Yi(n,e,r=we){const g=Js(n,e,r),l=n.child({context:g});return Fs(l,g,r)}function ks(n){var e,r;const g=new js((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:Cn(De(Ne({},n.opts),{level:"trace",browser:De(Ne({},(r=n.opts)==null?void 0:r.browser),{write:l=>g.write(l)})})),chunkLoggerController:g}}function Xs(n){var e;const r=new Bs((e=n.opts)==null?void 0:e.level,n.maxSizeInBytes);return{logger:Cn(De(Ne({},n.opts),{level:"trace"}),r),chunkLoggerController:r}}function Vi(n){return typeof n.loggerOverride<"u"&&typeof n.loggerOverride!="string"?{logger:n.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ks(n):Xs(n)}var Ye={},zn={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=qr,r=Mn;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var g=function(){function A(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return A.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},A.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},A.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},A.prototype.update=function(S,a){if(a===void 0&&(a=S.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var h=0;if(this._bytesHashed+=a,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&a>0;)this._buffer[this._bufferLength++]=S[h++],a--;this._bufferLength===this.blockSize&&(O(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(a>=this.blockSize&&(h=O(this._tempHi,this._tempLo,this._stateHi,this._stateLo,S,h,a),a%=this.blockSize);a>0;)this._buffer[this._bufferLength++]=S[h++],a--;return this},A.prototype.finish=function(S){if(!this._finished){var a=this._bytesHashed,h=this._bufferLength,y=a/536870912|0,v=a<<3,T=a%128<112?128:256;this._buffer[h]=128;for(var m=h+1;m<T-8;m++)this._buffer[m]=0;e.writeUint32BE(y,this._buffer,T-8),e.writeUint32BE(v,this._buffer,T-4),O(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,T),this._finished=!0}for(var m=0;m<this.digestLength/8;m++)e.writeUint32BE(this._stateHi[m],S,m*8),e.writeUint32BE(this._stateLo[m],S,m*8+4);return this},A.prototype.digest=function(){var S=new Uint8Array(this.digestLength);return this.finish(S),S},A.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},A.prototype.restoreState=function(S){return this._stateHi.set(S.stateHi),this._stateLo.set(S.stateLo),this._bufferLength=S.bufferLength,S.buffer&&this._buffer.set(S.buffer),this._bytesHashed=S.bytesHashed,this._finished=!1,this},A.prototype.cleanSavedState=function(S){r.wipe(S.stateHi),r.wipe(S.stateLo),S.buffer&&r.wipe(S.buffer),S.bufferLength=0,S.bytesHashed=0},A}();n.SHA512=g;var l=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function O(A,S,a,h,y,v,T){for(var m=a[0],j=a[1],tt=a[2],St=a[3],B=a[4],Dt=a[5],Vt=a[6],Rt=a[7],H=h[0],C=h[1],Pt=h[2],Zt=h[3],dt=h[4],Gt=h[5],$t=h[6],Jt=h[7],p,b,X,ct,I,x,_,E;T>=128;){for(var Lt=0;Lt<16;Lt++){var et=8*Lt+v;A[Lt]=e.readUint32BE(y,et),S[Lt]=e.readUint32BE(y,et+4)}for(var Lt=0;Lt<80;Lt++){var de=m,M=j,ue=tt,u=St,c=B,f=Dt,t=Vt,i=Rt,L=H,R=C,D=Pt,$=Zt,N=dt,K=Gt,Tt=$t,ut=Jt;if(p=Rt,b=Jt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=(B>>>14|dt<<18)^(B>>>18|dt<<14)^(dt>>>9|B<<23),b=(dt>>>14|B<<18)^(dt>>>18|B<<14)^(B>>>9|dt<<23),I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,p=B&Dt^~B&Vt,b=dt&Gt^~dt&$t,I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,p=l[Lt*2],b=l[Lt*2+1],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,p=A[Lt%16],b=S[Lt%16],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,X=_&65535|E<<16,ct=I&65535|x<<16,p=X,b=ct,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=(m>>>28|H<<4)^(H>>>2|m<<30)^(H>>>7|m<<25),b=(H>>>28|m<<4)^(m>>>2|H<<30)^(m>>>7|H<<25),I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,p=m&j^m&tt^j&tt,b=H&C^H&Pt^C&Pt,I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,i=_&65535|E<<16,ut=I&65535|x<<16,p=u,b=$,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=X,b=ct,I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,u=_&65535|E<<16,$=I&65535|x<<16,j=de,tt=M,St=ue,B=u,Dt=c,Vt=f,Rt=t,m=i,C=L,Pt=R,Zt=D,dt=$,Gt=N,$t=K,Jt=Tt,H=ut,Lt%16===15)for(var et=0;et<16;et++)p=A[et],b=S[et],I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=A[(et+9)%16],b=S[(et+9)%16],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,X=A[(et+1)%16],ct=S[(et+1)%16],p=(X>>>1|ct<<31)^(X>>>8|ct<<24)^X>>>7,b=(ct>>>1|X<<31)^(ct>>>8|X<<24)^(ct>>>7|X<<25),I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,X=A[(et+14)%16],ct=S[(et+14)%16],p=(X>>>19|ct<<13)^(ct>>>29|X<<3)^X>>>6,b=(ct>>>19|X<<13)^(X>>>29|ct<<3)^(ct>>>6|X<<26),I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,A[et]=_&65535|E<<16,S[et]=I&65535|x<<16}p=m,b=H,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[0],b=h[0],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[0]=m=_&65535|E<<16,h[0]=H=I&65535|x<<16,p=j,b=C,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[1],b=h[1],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[1]=j=_&65535|E<<16,h[1]=C=I&65535|x<<16,p=tt,b=Pt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[2],b=h[2],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[2]=tt=_&65535|E<<16,h[2]=Pt=I&65535|x<<16,p=St,b=Zt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[3],b=h[3],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[3]=St=_&65535|E<<16,h[3]=Zt=I&65535|x<<16,p=B,b=dt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[4],b=h[4],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[4]=B=_&65535|E<<16,h[4]=dt=I&65535|x<<16,p=Dt,b=Gt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[5],b=h[5],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[5]=Dt=_&65535|E<<16,h[5]=Gt=I&65535|x<<16,p=Vt,b=$t,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[6],b=h[6],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[6]=Vt=_&65535|E<<16,h[6]=$t=I&65535|x<<16,p=Rt,b=Jt,I=b&65535,x=b>>>16,_=p&65535,E=p>>>16,p=a[7],b=h[7],I+=b&65535,x+=b>>>16,_+=p&65535,E+=p>>>16,x+=I>>>16,_+=x>>>16,E+=_>>>16,a[7]=Rt=_&65535|E<<16,h[7]=Jt=I&65535|x<<16,v+=128,T-=128}return v}function F(A){var S=new g;S.update(A);var a=S.digest();return S.clean(),a}n.hash=F})(zn);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Nn,r=zn,g=Mn;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function l(u){const c=new Float64Array(16);if(u)for(let f=0;f<u.length;f++)c[f]=u[f];return c}const O=new Uint8Array(32);O[0]=9;const F=l(),A=l([1]),S=l([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),a=l([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),h=l([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),y=l([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=l([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function T(u,c){for(let f=0;f<16;f++)u[f]=c[f]|0}function m(u){let c=1;for(let f=0;f<16;f++){let t=u[f]+c+65535;c=Math.floor(t/65536),u[f]=t-c*65536}u[0]+=c-1+37*(c-1)}function j(u,c,f){const t=~(f-1);for(let i=0;i<16;i++){const L=t&(u[i]^c[i]);u[i]^=L,c[i]^=L}}function tt(u,c){const f=l(),t=l();for(let i=0;i<16;i++)t[i]=c[i];m(t),m(t),m(t);for(let i=0;i<2;i++){f[0]=t[0]-65517;for(let R=1;R<15;R++)f[R]=t[R]-65535-(f[R-1]>>16&1),f[R-1]&=65535;f[15]=t[15]-32767-(f[14]>>16&1);const L=f[15]>>16&1;f[14]&=65535,j(t,f,1-L)}for(let i=0;i<16;i++)u[2*i]=t[i]&255,u[2*i+1]=t[i]>>8}function St(u,c){let f=0;for(let t=0;t<32;t++)f|=u[t]^c[t];return(1&f-1>>>8)-1}function B(u,c){const f=new Uint8Array(32),t=new Uint8Array(32);return tt(f,u),tt(t,c),St(f,t)}function Dt(u){const c=new Uint8Array(32);return tt(c,u),c[0]&1}function Vt(u,c){for(let f=0;f<16;f++)u[f]=c[2*f]+(c[2*f+1]<<8);u[15]&=32767}function Rt(u,c,f){for(let t=0;t<16;t++)u[t]=c[t]+f[t]}function H(u,c,f){for(let t=0;t<16;t++)u[t]=c[t]-f[t]}function C(u,c,f){let t,i,L=0,R=0,D=0,$=0,N=0,K=0,Tt=0,ut=0,At=0,gt=0,lt=0,nt=0,Q=0,Y=0,J=0,U=0,rt=0,bt=0,z=0,Ct=0,Nt=0,Kt=0,Ut=0,jt=0,kt=0,Yt=0,te=0,Ht=0,ie=0,ge=0,ve=0,st=f[0],V=f[1],it=f[2],ot=f[3],at=f[4],Z=f[5],pt=f[6],yt=f[7],xt=f[8],_t=f[9],mt=f[10],ht=f[11],ft=f[12],W=f[13],wt=f[14],vt=f[15];t=c[0],L+=t*st,R+=t*V,D+=t*it,$+=t*ot,N+=t*at,K+=t*Z,Tt+=t*pt,ut+=t*yt,At+=t*xt,gt+=t*_t,lt+=t*mt,nt+=t*ht,Q+=t*ft,Y+=t*W,J+=t*wt,U+=t*vt,t=c[1],R+=t*st,D+=t*V,$+=t*it,N+=t*ot,K+=t*at,Tt+=t*Z,ut+=t*pt,At+=t*yt,gt+=t*xt,lt+=t*_t,nt+=t*mt,Q+=t*ht,Y+=t*ft,J+=t*W,U+=t*wt,rt+=t*vt,t=c[2],D+=t*st,$+=t*V,N+=t*it,K+=t*ot,Tt+=t*at,ut+=t*Z,At+=t*pt,gt+=t*yt,lt+=t*xt,nt+=t*_t,Q+=t*mt,Y+=t*ht,J+=t*ft,U+=t*W,rt+=t*wt,bt+=t*vt,t=c[3],$+=t*st,N+=t*V,K+=t*it,Tt+=t*ot,ut+=t*at,At+=t*Z,gt+=t*pt,lt+=t*yt,nt+=t*xt,Q+=t*_t,Y+=t*mt,J+=t*ht,U+=t*ft,rt+=t*W,bt+=t*wt,z+=t*vt,t=c[4],N+=t*st,K+=t*V,Tt+=t*it,ut+=t*ot,At+=t*at,gt+=t*Z,lt+=t*pt,nt+=t*yt,Q+=t*xt,Y+=t*_t,J+=t*mt,U+=t*ht,rt+=t*ft,bt+=t*W,z+=t*wt,Ct+=t*vt,t=c[5],K+=t*st,Tt+=t*V,ut+=t*it,At+=t*ot,gt+=t*at,lt+=t*Z,nt+=t*pt,Q+=t*yt,Y+=t*xt,J+=t*_t,U+=t*mt,rt+=t*ht,bt+=t*ft,z+=t*W,Ct+=t*wt,Nt+=t*vt,t=c[6],Tt+=t*st,ut+=t*V,At+=t*it,gt+=t*ot,lt+=t*at,nt+=t*Z,Q+=t*pt,Y+=t*yt,J+=t*xt,U+=t*_t,rt+=t*mt,bt+=t*ht,z+=t*ft,Ct+=t*W,Nt+=t*wt,Kt+=t*vt,t=c[7],ut+=t*st,At+=t*V,gt+=t*it,lt+=t*ot,nt+=t*at,Q+=t*Z,Y+=t*pt,J+=t*yt,U+=t*xt,rt+=t*_t,bt+=t*mt,z+=t*ht,Ct+=t*ft,Nt+=t*W,Kt+=t*wt,Ut+=t*vt,t=c[8],At+=t*st,gt+=t*V,lt+=t*it,nt+=t*ot,Q+=t*at,Y+=t*Z,J+=t*pt,U+=t*yt,rt+=t*xt,bt+=t*_t,z+=t*mt,Ct+=t*ht,Nt+=t*ft,Kt+=t*W,Ut+=t*wt,jt+=t*vt,t=c[9],gt+=t*st,lt+=t*V,nt+=t*it,Q+=t*ot,Y+=t*at,J+=t*Z,U+=t*pt,rt+=t*yt,bt+=t*xt,z+=t*_t,Ct+=t*mt,Nt+=t*ht,Kt+=t*ft,Ut+=t*W,jt+=t*wt,kt+=t*vt,t=c[10],lt+=t*st,nt+=t*V,Q+=t*it,Y+=t*ot,J+=t*at,U+=t*Z,rt+=t*pt,bt+=t*yt,z+=t*xt,Ct+=t*_t,Nt+=t*mt,Kt+=t*ht,Ut+=t*ft,jt+=t*W,kt+=t*wt,Yt+=t*vt,t=c[11],nt+=t*st,Q+=t*V,Y+=t*it,J+=t*ot,U+=t*at,rt+=t*Z,bt+=t*pt,z+=t*yt,Ct+=t*xt,Nt+=t*_t,Kt+=t*mt,Ut+=t*ht,jt+=t*ft,kt+=t*W,Yt+=t*wt,te+=t*vt,t=c[12],Q+=t*st,Y+=t*V,J+=t*it,U+=t*ot,rt+=t*at,bt+=t*Z,z+=t*pt,Ct+=t*yt,Nt+=t*xt,Kt+=t*_t,Ut+=t*mt,jt+=t*ht,kt+=t*ft,Yt+=t*W,te+=t*wt,Ht+=t*vt,t=c[13],Y+=t*st,J+=t*V,U+=t*it,rt+=t*ot,bt+=t*at,z+=t*Z,Ct+=t*pt,Nt+=t*yt,Kt+=t*xt,Ut+=t*_t,jt+=t*mt,kt+=t*ht,Yt+=t*ft,te+=t*W,Ht+=t*wt,ie+=t*vt,t=c[14],J+=t*st,U+=t*V,rt+=t*it,bt+=t*ot,z+=t*at,Ct+=t*Z,Nt+=t*pt,Kt+=t*yt,Ut+=t*xt,jt+=t*_t,kt+=t*mt,Yt+=t*ht,te+=t*ft,Ht+=t*W,ie+=t*wt,ge+=t*vt,t=c[15],U+=t*st,rt+=t*V,bt+=t*it,z+=t*ot,Ct+=t*at,Nt+=t*Z,Kt+=t*pt,Ut+=t*yt,jt+=t*xt,kt+=t*_t,Yt+=t*mt,te+=t*ht,Ht+=t*ft,ie+=t*W,ge+=t*wt,ve+=t*vt,L+=38*rt,R+=38*bt,D+=38*z,$+=38*Ct,N+=38*Nt,K+=38*Kt,Tt+=38*Ut,ut+=38*jt,At+=38*kt,gt+=38*Yt,lt+=38*te,nt+=38*Ht,Q+=38*ie,Y+=38*ge,J+=38*ve,i=1,t=L+i+65535,i=Math.floor(t/65536),L=t-i*65536,t=R+i+65535,i=Math.floor(t/65536),R=t-i*65536,t=D+i+65535,i=Math.floor(t/65536),D=t-i*65536,t=$+i+65535,i=Math.floor(t/65536),$=t-i*65536,t=N+i+65535,i=Math.floor(t/65536),N=t-i*65536,t=K+i+65535,i=Math.floor(t/65536),K=t-i*65536,t=Tt+i+65535,i=Math.floor(t/65536),Tt=t-i*65536,t=ut+i+65535,i=Math.floor(t/65536),ut=t-i*65536,t=At+i+65535,i=Math.floor(t/65536),At=t-i*65536,t=gt+i+65535,i=Math.floor(t/65536),gt=t-i*65536,t=lt+i+65535,i=Math.floor(t/65536),lt=t-i*65536,t=nt+i+65535,i=Math.floor(t/65536),nt=t-i*65536,t=Q+i+65535,i=Math.floor(t/65536),Q=t-i*65536,t=Y+i+65535,i=Math.floor(t/65536),Y=t-i*65536,t=J+i+65535,i=Math.floor(t/65536),J=t-i*65536,t=U+i+65535,i=Math.floor(t/65536),U=t-i*65536,L+=i-1+37*(i-1),i=1,t=L+i+65535,i=Math.floor(t/65536),L=t-i*65536,t=R+i+65535,i=Math.floor(t/65536),R=t-i*65536,t=D+i+65535,i=Math.floor(t/65536),D=t-i*65536,t=$+i+65535,i=Math.floor(t/65536),$=t-i*65536,t=N+i+65535,i=Math.floor(t/65536),N=t-i*65536,t=K+i+65535,i=Math.floor(t/65536),K=t-i*65536,t=Tt+i+65535,i=Math.floor(t/65536),Tt=t-i*65536,t=ut+i+65535,i=Math.floor(t/65536),ut=t-i*65536,t=At+i+65535,i=Math.floor(t/65536),At=t-i*65536,t=gt+i+65535,i=Math.floor(t/65536),gt=t-i*65536,t=lt+i+65535,i=Math.floor(t/65536),lt=t-i*65536,t=nt+i+65535,i=Math.floor(t/65536),nt=t-i*65536,t=Q+i+65535,i=Math.floor(t/65536),Q=t-i*65536,t=Y+i+65535,i=Math.floor(t/65536),Y=t-i*65536,t=J+i+65535,i=Math.floor(t/65536),J=t-i*65536,t=U+i+65535,i=Math.floor(t/65536),U=t-i*65536,L+=i-1+37*(i-1),u[0]=L,u[1]=R,u[2]=D,u[3]=$,u[4]=N,u[5]=K,u[6]=Tt,u[7]=ut,u[8]=At,u[9]=gt,u[10]=lt,u[11]=nt,u[12]=Q,u[13]=Y,u[14]=J,u[15]=U}function Pt(u,c){C(u,c,c)}function Zt(u,c){const f=l();let t;for(t=0;t<16;t++)f[t]=c[t];for(t=253;t>=0;t--)Pt(f,f),t!==2&&t!==4&&C(f,f,c);for(t=0;t<16;t++)u[t]=f[t]}function dt(u,c){const f=l();let t;for(t=0;t<16;t++)f[t]=c[t];for(t=250;t>=0;t--)Pt(f,f),t!==1&&C(f,f,c);for(t=0;t<16;t++)u[t]=f[t]}function Gt(u,c){const f=l(),t=l(),i=l(),L=l(),R=l(),D=l(),$=l(),N=l(),K=l();H(f,u[1],u[0]),H(K,c[1],c[0]),C(f,f,K),Rt(t,u[0],u[1]),Rt(K,c[0],c[1]),C(t,t,K),C(i,u[3],c[3]),C(i,i,a),C(L,u[2],c[2]),Rt(L,L,L),H(R,t,f),H(D,L,i),Rt($,L,i),Rt(N,t,f),C(u[0],R,D),C(u[1],N,$),C(u[2],$,D),C(u[3],R,N)}function $t(u,c,f){for(let t=0;t<4;t++)j(u[t],c[t],f)}function Jt(u,c){const f=l(),t=l(),i=l();Zt(i,c[2]),C(f,c[0],i),C(t,c[1],i),tt(u,t),u[31]^=Dt(f)<<7}function p(u,c,f){T(u[0],F),T(u[1],A),T(u[2],A),T(u[3],F);for(let t=255;t>=0;--t){const i=f[t/8|0]>>(t&7)&1;$t(u,c,i),Gt(c,u),Gt(u,u),$t(u,c,i)}}function b(u,c){const f=[l(),l(),l(),l()];T(f[0],h),T(f[1],y),T(f[2],A),C(f[3],h,y),p(u,f,c)}function X(u){if(u.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const c=(0,r.hash)(u);c[0]&=248,c[31]&=127,c[31]|=64;const f=new Uint8Array(32),t=[l(),l(),l(),l()];b(t,c),Jt(f,t);const i=new Uint8Array(64);return i.set(u),i.set(f,32),{publicKey:f,secretKey:i}}n.generateKeyPairFromSeed=X;function ct(u){const c=(0,e.randomBytes)(32,u),f=X(c);return(0,g.wipe)(c),f}n.generateKeyPair=ct;function I(u){if(u.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(u.subarray(32))}n.extractPublicKeyFromSecretKey=I;const x=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function _(u,c){let f,t,i,L;for(t=63;t>=32;--t){for(f=0,i=t-32,L=t-12;i<L;++i)c[i]+=f-16*c[t]*x[i-(t-32)],f=Math.floor((c[i]+128)/256),c[i]-=f*256;c[i]+=f,c[t]=0}for(f=0,i=0;i<32;i++)c[i]+=f-(c[31]>>4)*x[i],f=c[i]>>8,c[i]&=255;for(i=0;i<32;i++)c[i]-=f*x[i];for(t=0;t<32;t++)c[t+1]+=c[t]>>8,u[t]=c[t]&255}function E(u){const c=new Float64Array(64);for(let f=0;f<64;f++)c[f]=u[f];for(let f=0;f<64;f++)u[f]=0;_(u,c)}function Lt(u,c){const f=new Float64Array(64),t=[l(),l(),l(),l()],i=(0,r.hash)(u.subarray(0,32));i[0]&=248,i[31]&=127,i[31]|=64;const L=new Uint8Array(64);L.set(i.subarray(32),32);const R=new r.SHA512;R.update(L.subarray(32)),R.update(c);const D=R.digest();R.clean(),E(D),b(t,D),Jt(L,t),R.reset(),R.update(L.subarray(0,32)),R.update(u.subarray(32)),R.update(c);const $=R.digest();E($);for(let N=0;N<32;N++)f[N]=D[N];for(let N=0;N<32;N++)for(let K=0;K<32;K++)f[N+K]+=$[N]*i[K];return _(L.subarray(32),f),L}n.sign=Lt;function et(u,c){const f=l(),t=l(),i=l(),L=l(),R=l(),D=l(),$=l();return T(u[2],A),Vt(u[1],c),Pt(i,u[1]),C(L,i,S),H(i,i,u[2]),Rt(L,u[2],L),Pt(R,L),Pt(D,R),C($,D,R),C(f,$,i),C(f,f,L),dt(f,f),C(f,f,i),C(f,f,L),C(f,f,L),C(u[0],f,L),Pt(t,u[0]),C(t,t,L),B(t,i)&&C(u[0],u[0],v),Pt(t,u[0]),C(t,t,L),B(t,i)?-1:(Dt(u[0])===c[31]>>7&&H(u[0],F,u[0]),C(u[3],u[0],u[1]),0)}function de(u,c,f){const t=new Uint8Array(32),i=[l(),l(),l(),l()],L=[l(),l(),l(),l()];if(f.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(et(L,u))return!1;const R=new r.SHA512;R.update(f.subarray(0,32)),R.update(u),R.update(c);const D=R.digest();return E(D),p(i,L,D),b(L,f.subarray(32)),Gt(i,L),Jt(t,i),!St(f,t)}n.verify=de;function M(u){let c=[l(),l(),l(),l()];if(et(c,u))throw new Error("Ed25519: invalid public key");let f=l(),t=l(),i=c[1];Rt(f,A,i),H(t,A,i),Zt(t,t),C(f,f,t);let L=new Uint8Array(32);return tt(L,f),L}n.convertPublicKeyToX25519=M;function ue(u){const c=(0,r.hash)(u.subarray(0,32));c[0]&=248,c[31]&=127,c[31]|=64;const f=new Uint8Array(c.subarray(0,32));return(0,g.wipe)(c),f}n.convertSecretKeyToX25519=ue})(Ye);const Ys="EdDSA",Vs="JWT",je=".",He="base64url",Gn="utf8",Fn="utf8",Zs=":",qs="did",Qs="key",_n="base58btc",ti="z",ei="K36",ni=32;function mn(n){return me(Ue(he(n,He),Gn))}function Be(n){return Ue(he(se(n),Gn),He)}function ri(n){const e=he(ei,_n),r=ti+Ue(Qr([e,n]),_n);return[qs,Qs,r].join(Zs)}function si(n){return Ue(n,He)}function ii(n){return he(n,He)}function oi(n){return he([Be(n.header),Be(n.payload)].join(je),Fn)}function ai(n){return[Be(n.header),Be(n.payload),si(n.signature)].join(je)}function Zi(n){const e=n.split(je),r=mn(e[0]),g=mn(e[1]),l=ii(e[2]),O=he(e.slice(0,2).join(je),Fn);return{header:r,payload:g,signature:l,data:O}}function qi(n=Nn.randomBytes(ni)){return Ye.generateKeyPairFromSeed(n)}async function Qi(n,e,r,g,l=ke.fromMiliseconds(Date.now())){const O={alg:Ys,typ:Vs},F=ri(g.publicKey),A=l+r,S={iss:F,sub:n,aud:e,iat:l,exp:A},a=oi({header:O,payload:S}),h=Ye.sign(g.secretKey,a);return ai({header:O,payload:S,signature:h})}const fi="PARSE_ERROR",ci="INVALID_REQUEST",ui="METHOD_NOT_FOUND",li="INVALID_PARAMS",Wn="INTERNAL_ERROR",Ve="SERVER_ERROR",hi=[-32700,-32600,-32601,-32602,-32603],xe={[fi]:{code:-32700,message:"Parse error"},[ci]:{code:-32600,message:"Invalid Request"},[ui]:{code:-32601,message:"Method not found"},[li]:{code:-32602,message:"Invalid params"},[Wn]:{code:-32603,message:"Internal error"},[Ve]:{code:-32e3,message:"Server error"}},Jn=Ve;function di(n){return hi.includes(n)}function wn(n){return Object.keys(xe).includes(n)?xe[n]:xe[Jn]}function gi(n){const e=Object.values(xe).find(r=>r.code===n);return e||xe[Jn]}function kn(n,e,r){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):n}function Xn(n=3){const e=Date.now()*Math.pow(10,n),r=Math.floor(Math.random()*Math.pow(10,n));return e+r}function bi(n=6){return BigInt(Xn(n))}function pi(n,e,r){return{id:r||Xn(),jsonrpc:"2.0",method:n,params:e}}function to(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Yn(n,e,r){return{id:n,jsonrpc:"2.0",error:yi(e)}}function yi(n,e){return typeof n>"u"?wn(Wn):(typeof n=="string"&&(n=Object.assign(Object.assign({},wn(Ve)),{message:n})),di(n.code)&&(n=gi(n.code)),n)}class xi{}class _i extends xi{constructor(){super()}}class mi extends _i{constructor(e){super()}}const wi="^https?:",vi="^wss?:";function Ei(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Vn(n,e){const r=Ei(n);return typeof r>"u"?!1:new RegExp(e).test(r)}function vn(n){return Vn(n,wi)}function En(n){return Vn(n,vi)}function Ii(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function Zn(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function eo(n){return Zn(n)&&"method"in n}function Si(n){return Zn(n)&&(Li(n)||qn(n))}function Li(n){return"result"in n}function qn(n){return"error"in n}class no extends mi{constructor(e){super(e),this.events=new Ke.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(pi(e.method,e.params||[],e.id||bi().toString()),r)}async requestStrict(e,r){return new Promise(async(g,l)=>{if(!this.connection.connected)try{await this.open()}catch(O){l(O)}this.events.on(`${e.id}`,O=>{qn(O)?l(O.error):g(O.result)});try{await this.connection.send(e,r)}catch(O){l(O)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Si(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Ti=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Ai=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",In=n=>n.split("?")[0],Sn=10,Oi=Ti();let ro=class{constructor(e){if(this.url=e,this.events=new Ke.EventEmitter,this.registering=!1,!En(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=g=>{this.onClose(g),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(se(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!En(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((g,l)=>{this.events.once("register_error",O=>{this.resetMaxListeners(),l(O)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return l(new Error("WebSocket connection is missing or invalid"));g(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,g)=>{const l=new URLSearchParams(e).get("origin"),O=Ur.isReactNative()?{headers:{origin:l}}:{rejectUnauthorized:!Ii(e)},F=new Oi(e,[],O);Ai()?F.onerror=A=>{const S=A;g(this.emitError(S.error))}:F.on("error",A=>{g(this.emitError(A))}),F.onopen=()=>{this.onOpen(F),r(F)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?me(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const g=this.parseError(r),l=g.message||g.toString(),O=Yn(e,l);this.events.emit("payload",O)}parseError(e,r=this.url){return kn(e,In(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Sn&&this.events.setMaxListeners(Sn)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${In(this.url)}`));return this.events.emit("register_error",r),r}};var $e={exports:{}};$e.exports;(function(n,e){var r=200,g="__lodash_hash_undefined__",l=1,O=2,F=9007199254740991,A="[object Arguments]",S="[object Array]",a="[object AsyncFunction]",h="[object Boolean]",y="[object Date]",v="[object Error]",T="[object Function]",m="[object GeneratorFunction]",j="[object Map]",tt="[object Number]",St="[object Null]",B="[object Object]",Dt="[object Promise]",Vt="[object Proxy]",Rt="[object RegExp]",H="[object Set]",C="[object String]",Pt="[object Symbol]",Zt="[object Undefined]",dt="[object WeakMap]",Gt="[object ArrayBuffer]",$t="[object DataView]",Jt="[object Float32Array]",p="[object Float64Array]",b="[object Int8Array]",X="[object Int16Array]",ct="[object Int32Array]",I="[object Uint8Array]",x="[object Uint8ClampedArray]",_="[object Uint16Array]",E="[object Uint32Array]",Lt=/[\\^$.*+?()[\]{}|]/g,et=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,M={};M[Jt]=M[p]=M[b]=M[X]=M[ct]=M[I]=M[x]=M[_]=M[E]=!0,M[A]=M[S]=M[Gt]=M[h]=M[$t]=M[y]=M[v]=M[T]=M[j]=M[tt]=M[B]=M[Rt]=M[H]=M[C]=M[dt]=!1;var ue=typeof Oe=="object"&&Oe&&Oe.Object===Object&&Oe,u=typeof self=="object"&&self&&self.Object===Object&&self,c=ue||u||Function("return this")(),f=e&&!e.nodeType&&e,t=f&&!0&&n&&!n.nodeType&&n,i=t&&t.exports===f,L=i&&ue.process,R=function(){try{return L&&L.binding&&L.binding("util")}catch{}}(),D=R&&R.isTypedArray;function $(s,o){for(var d=-1,w=s==null?0:s.length,G=0,P=[];++d<w;){var q=s[d];o(q,d,s)&&(P[G++]=q)}return P}function N(s,o){for(var d=-1,w=o.length,G=s.length;++d<w;)s[G+d]=o[d];return s}function K(s,o){for(var d=-1,w=s==null?0:s.length;++d<w;)if(o(s[d],d,s))return!0;return!1}function Tt(s,o){for(var d=-1,w=Array(s);++d<s;)w[d]=o(d);return w}function ut(s){return function(o){return s(o)}}function At(s,o){return s.has(o)}function gt(s,o){return s==null?void 0:s[o]}function lt(s){var o=-1,d=Array(s.size);return s.forEach(function(w,G){d[++o]=[G,w]}),d}function nt(s,o){return function(d){return s(o(d))}}function Q(s){var o=-1,d=Array(s.size);return s.forEach(function(w){d[++o]=w}),d}var Y=Array.prototype,J=Function.prototype,U=Object.prototype,rt=c["__core-js_shared__"],bt=J.toString,z=U.hasOwnProperty,Ct=function(){var s=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Nt=U.toString,Kt=RegExp("^"+bt.call(z).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ut=i?c.Buffer:void 0,jt=c.Symbol,kt=c.Uint8Array,Yt=U.propertyIsEnumerable,te=Y.splice,Ht=jt?jt.toStringTag:void 0,ie=Object.getOwnPropertySymbols,ge=Ut?Ut.isBuffer:void 0,ve=nt(Object.keys,Object),st=le(c,"DataView"),V=le(c,"Map"),it=le(c,"Promise"),ot=le(c,"Set"),at=le(c,"WeakMap"),Z=le(Object,"create"),pt=ae(st),yt=ae(V),xt=ae(it),_t=ae(ot),mt=ae(at),ht=jt?jt.prototype:void 0,ft=ht?ht.valueOf:void 0;function W(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var w=s[o];this.set(w[0],w[1])}}function wt(){this.__data__=Z?Z(null):{},this.size=0}function vt(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}function Qn(s){var o=this.__data__;if(Z){var d=o[s];return d===g?void 0:d}return z.call(o,s)?o[s]:void 0}function tr(s){var o=this.__data__;return Z?o[s]!==void 0:z.call(o,s)}function er(s,o){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Z&&o===void 0?g:o,this}W.prototype.clear=wt,W.prototype.delete=vt,W.prototype.get=Qn,W.prototype.has=tr,W.prototype.set=er;function qt(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var w=s[o];this.set(w[0],w[1])}}function nr(){this.__data__=[],this.size=0}function rr(s){var o=this.__data__,d=Ie(o,s);if(d<0)return!1;var w=o.length-1;return d==w?o.pop():te.call(o,d,1),--this.size,!0}function sr(s){var o=this.__data__,d=Ie(o,s);return d<0?void 0:o[d][1]}function ir(s){return Ie(this.__data__,s)>-1}function or(s,o){var d=this.__data__,w=Ie(d,s);return w<0?(++this.size,d.push([s,o])):d[w][1]=o,this}qt.prototype.clear=nr,qt.prototype.delete=rr,qt.prototype.get=sr,qt.prototype.has=ir,qt.prototype.set=or;function oe(s){var o=-1,d=s==null?0:s.length;for(this.clear();++o<d;){var w=s[o];this.set(w[0],w[1])}}function ar(){this.size=0,this.__data__={hash:new W,map:new(V||qt),string:new W}}function fr(s){var o=Se(this,s).delete(s);return this.size-=o?1:0,o}function cr(s){return Se(this,s).get(s)}function ur(s){return Se(this,s).has(s)}function lr(s,o){var d=Se(this,s),w=d.size;return d.set(s,o),this.size+=d.size==w?0:1,this}oe.prototype.clear=ar,oe.prototype.delete=fr,oe.prototype.get=cr,oe.prototype.has=ur,oe.prototype.set=lr;function Ee(s){var o=-1,d=s==null?0:s.length;for(this.__data__=new oe;++o<d;)this.add(s[o])}function hr(s){return this.__data__.set(s,g),this}function dr(s){return this.__data__.has(s)}Ee.prototype.add=Ee.prototype.push=hr,Ee.prototype.has=dr;function ee(s){var o=this.__data__=new qt(s);this.size=o.size}function gr(){this.__data__=new qt,this.size=0}function br(s){var o=this.__data__,d=o.delete(s);return this.size=o.size,d}function pr(s){return this.__data__.get(s)}function yr(s){return this.__data__.has(s)}function xr(s,o){var d=this.__data__;if(d instanceof qt){var w=d.__data__;if(!V||w.length<r-1)return w.push([s,o]),this.size=++d.size,this;d=this.__data__=new oe(w)}return d.set(s,o),this.size=d.size,this}ee.prototype.clear=gr,ee.prototype.delete=br,ee.prototype.get=pr,ee.prototype.has=yr,ee.prototype.set=xr;function _r(s,o){var d=Le(s),w=!d&&Nr(s),G=!d&&!w&&ze(s),P=!d&&!w&&!G&&on(s),q=d||w||G||P,Et=q?Tt(s.length,String):[],Ot=Et.length;for(var k in s)z.call(s,k)&&!(q&&(k=="length"||G&&(k=="offset"||k=="parent")||P&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||Or(k,Ot)))&&Et.push(k);return Et}function Ie(s,o){for(var d=s.length;d--;)if(en(s[d][0],o))return d;return-1}function mr(s,o,d){var w=o(s);return Le(s)?w:N(w,d(s))}function be(s){return s==null?s===void 0?Zt:St:Ht&&Ht in Object(s)?Tr(s):Mr(s)}function Ze(s){return pe(s)&&be(s)==A}function qe(s,o,d,w,G){return s===o?!0:s==null||o==null||!pe(s)&&!pe(o)?s!==s&&o!==o:wr(s,o,d,w,qe,G)}function wr(s,o,d,w,G,P){var q=Le(s),Et=Le(o),Ot=q?S:ne(s),k=Et?S:ne(o);Ot=Ot==A?B:Ot,k=k==A?B:k;var zt=Ot==B,Xt=k==B,Mt=Ot==k;if(Mt&&ze(s)){if(!ze(o))return!1;q=!0,zt=!1}if(Mt&&!zt)return P||(P=new ee),q||on(s)?Qe(s,o,d,w,G,P):Sr(s,o,Ot,d,w,G,P);if(!(d&l)){var Ft=zt&&z.call(s,"__wrapped__"),Wt=Xt&&z.call(o,"__wrapped__");if(Ft||Wt){var re=Ft?s.value():s,Qt=Wt?o.value():o;return P||(P=new ee),G(re,Qt,d,w,P)}}return Mt?(P||(P=new ee),Lr(s,o,d,w,G,P)):!1}function vr(s){if(!sn(s)||Pr(s))return!1;var o=nn(s)?Kt:et;return o.test(ae(s))}function Er(s){return pe(s)&&rn(s.length)&&!!M[be(s)]}function Ir(s){if(!Cr(s))return ve(s);var o=[];for(var d in Object(s))z.call(s,d)&&d!="constructor"&&o.push(d);return o}function Qe(s,o,d,w,G,P){var q=d&l,Et=s.length,Ot=o.length;if(Et!=Ot&&!(q&&Ot>Et))return!1;var k=P.get(s);if(k&&P.get(o))return k==o;var zt=-1,Xt=!0,Mt=d&O?new Ee:void 0;for(P.set(s,o),P.set(o,s);++zt<Et;){var Ft=s[zt],Wt=o[zt];if(w)var re=q?w(Wt,Ft,zt,o,s,P):w(Ft,Wt,zt,s,o,P);if(re!==void 0){if(re)continue;Xt=!1;break}if(Mt){if(!K(o,function(Qt,fe){if(!At(Mt,fe)&&(Ft===Qt||G(Ft,Qt,d,w,P)))return Mt.push(fe)})){Xt=!1;break}}else if(!(Ft===Wt||G(Ft,Wt,d,w,P))){Xt=!1;break}}return P.delete(s),P.delete(o),Xt}function Sr(s,o,d,w,G,P,q){switch(d){case $t:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case Gt:return!(s.byteLength!=o.byteLength||!P(new kt(s),new kt(o)));case h:case y:case tt:return en(+s,+o);case v:return s.name==o.name&&s.message==o.message;case Rt:case C:return s==o+"";case j:var Et=lt;case H:var Ot=w&l;if(Et||(Et=Q),s.size!=o.size&&!Ot)return!1;var k=q.get(s);if(k)return k==o;w|=O,q.set(s,o);var zt=Qe(Et(s),Et(o),w,G,P,q);return q.delete(s),zt;case Pt:if(ft)return ft.call(s)==ft.call(o)}return!1}function Lr(s,o,d,w,G,P){var q=d&l,Et=tn(s),Ot=Et.length,k=tn(o),zt=k.length;if(Ot!=zt&&!q)return!1;for(var Xt=Ot;Xt--;){var Mt=Et[Xt];if(!(q?Mt in o:z.call(o,Mt)))return!1}var Ft=P.get(s);if(Ft&&P.get(o))return Ft==o;var Wt=!0;P.set(s,o),P.set(o,s);for(var re=q;++Xt<Ot;){Mt=Et[Xt];var Qt=s[Mt],fe=o[Mt];if(w)var an=q?w(fe,Qt,Mt,o,s,P):w(Qt,fe,Mt,s,o,P);if(!(an===void 0?Qt===fe||G(Qt,fe,d,w,P):an)){Wt=!1;break}re||(re=Mt=="constructor")}if(Wt&&!re){var Te=s.constructor,Ae=o.constructor;Te!=Ae&&"constructor"in s&&"constructor"in o&&!(typeof Te=="function"&&Te instanceof Te&&typeof Ae=="function"&&Ae instanceof Ae)&&(Wt=!1)}return P.delete(s),P.delete(o),Wt}function tn(s){return mr(s,Br,Ar)}function Se(s,o){var d=s.__data__;return Rr(o)?d[typeof o=="string"?"string":"hash"]:d.map}function le(s,o){var d=gt(s,o);return vr(d)?d:void 0}function Tr(s){var o=z.call(s,Ht),d=s[Ht];try{s[Ht]=void 0;var w=!0}catch{}var G=Nt.call(s);return w&&(o?s[Ht]=d:delete s[Ht]),G}var Ar=ie?function(s){return s==null?[]:(s=Object(s),$(ie(s),function(o){return Yt.call(s,o)}))}:$r,ne=be;(st&&ne(new st(new ArrayBuffer(1)))!=$t||V&&ne(new V)!=j||it&&ne(it.resolve())!=Dt||ot&&ne(new ot)!=H||at&&ne(new at)!=dt)&&(ne=function(s){var o=be(s),d=o==B?s.constructor:void 0,w=d?ae(d):"";if(w)switch(w){case pt:return $t;case yt:return j;case xt:return Dt;case _t:return H;case mt:return dt}return o});function Or(s,o){return o=o??F,!!o&&(typeof s=="number"||de.test(s))&&s>-1&&s%1==0&&s<o}function Rr(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function Pr(s){return!!Ct&&Ct in s}function Cr(s){var o=s&&s.constructor,d=typeof o=="function"&&o.prototype||U;return s===d}function Mr(s){return Nt.call(s)}function ae(s){if(s!=null){try{return bt.call(s)}catch{}try{return s+""}catch{}}return""}function en(s,o){return s===o||s!==s&&o!==o}var Nr=Ze(function(){return arguments}())?Ze:function(s){return pe(s)&&z.call(s,"callee")&&!Yt.call(s,"callee")},Le=Array.isArray;function Dr(s){return s!=null&&rn(s.length)&&!nn(s)}var ze=ge||Kr;function jr(s,o){return qe(s,o)}function nn(s){if(!sn(s))return!1;var o=be(s);return o==T||o==m||o==a||o==Vt}function rn(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=F}function sn(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}function pe(s){return s!=null&&typeof s=="object"}var on=D?ut(D):Er;function Br(s){return Dr(s)?_r(s):Ir(s)}function $r(){return[]}function Kr(){return!1}n.exports=jr})($e,$e.exports);var Ri=$e.exports;const io=Hr(Ri);var Pi=Object.defineProperty,Ci=Object.defineProperties,Mi=Object.getOwnPropertyDescriptors,Ln=Object.getOwnPropertySymbols,Ni=Object.prototype.hasOwnProperty,Di=Object.prototype.propertyIsEnumerable,Tn=(n,e,r)=>e in n?Pi(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,An=(n,e)=>{for(var r in e||(e={}))Ni.call(e,r)&&Tn(n,r,e[r]);if(Ln)for(var r of Ln(e))Di.call(e,r)&&Tn(n,r,e[r]);return n},On=(n,e)=>Ci(n,Mi(e));const ji={Accept:"application/json","Content-Type":"application/json"},Bi="POST",Rn={headers:ji,method:Bi},Pn=10;class oo{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ke.EventEmitter,this.isAvailable=!1,this.registering=!1,!vn(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=se(e),g=await(await fn(this.url,On(An({},Rn),{body:r}))).json();this.onPayload({data:g})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!vn(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((g,l)=>{this.events.once("register_error",O=>{this.resetMaxListeners(),l(O)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return l(new Error("HTTP connection is missing or invalid"));g()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=se({id:1,jsonrpc:"2.0",method:"test",params:[]});await fn(e,On(An({},Rn),{body:r}))}this.onOpen()}catch(r){const g=this.parseError(r);throw this.events.emit("register_error",g),this.onClose(),g}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?me(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const g=this.parseError(r),l=g.message||g.toString(),O=Yn(e,l);this.events.emit("payload",O)}parseError(e,r=this.url){return kn(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Pn&&this.events.setMaxListeners(Pn)}}const ao={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};export{Vi as A,oo as B,ao as C,Yi as E,Ps as I,se as a,me as b,Qr as c,Zi as d,ri as e,he as f,qi as g,Hi as h,Fi as i,io as j,Xi as k,bi as l,ro as m,eo as n,no as o,Si as p,to as q,Yn as r,Qi as s,Ue as t,Li as u,qn as v,pi as w,Ms as x,Ws as y,Xn as z};
